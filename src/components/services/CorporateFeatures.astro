---
import H2Title from "../UI/H2Title.astro";
import Section from "../UI/Section.astro";

interface FeatureItem {
  id: string;
  icon: Icon;
  title: string;
  details: string;
}
interface Icon {
  src: string;
  alt: string;
}

const { features } = Astro.props as { features: FeatureItem[] };
---

<section class="max-w-[85%] min-h-[45rem] mx-auto px-10 py-5 lg:px-0 lg:py-16">
  <H2Title text="Garantizamos" />
  <div class="cards-container flex flex-wrap justify-center gap-6 ">
    {
      features.map(({ id, icon, title, details }) => (
        <div class="flip-card" id={id}>
          <div class="flip-card-inner">
            <!-- Frente de la tarjeta -->
            <div class="flip-card-front flex flex-col items-center justify-between rounded-2xl px-12 py-16 min-h-[500px]">
              <img src={icon.src} alt={icon.alt} class="size-36" />
              <span class="my-8 border-b w-full border-primary-500"></span>
              <h2 class="text-2xl font-bold text-center">{title}</h2>
              <footer class="flex flex-col items-center mt-7">
                <img src="/icons/services/ver.svg" alt="Ver contenido" class="size-11" />
                <p class="text-sm font-light">clic para ver</p>
              </footer>
            </div>
            <!-- Parte trasera de la tarjeta -->
            <div class="flip-card-back flex flex-col items-center justify-between rounded-2xl px-10 py-12 min-h-[500px]">
              <p class="text-base font-light leading-7">{details}</p>
              <footer class="flex flex-col items-center">
                <img src="/icons/services/ocultar.svg" alt="Ver contenido" class="size-11" />
                <p class="text-sm font-light">clic para ocultar</p>
              </footer>
            </div>
          </div>
        </div>
      ))
    }
  </div>
</section>

<style>
.cards-container {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
  justify-content: center;
}

.flip-card {
  position: relative;
  width: 300px;
  height: 200px;
  perspective: 1000px; /* Profundidad 3D */
  font-family: "Helvetica Neue", sans-serif;
  font-weight: bold;
  cursor: pointer;
}

.flip-card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transition: transform 0.6s ease-out;
}

.flip-card-front,
.flip-card-back {
  @apply shadow-lg transition-all duration-300 ease-in-out;
  background-color: rgba(0, 178, 173, 0.09);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  backface-visibility: hidden;
  transform: rotateX(0deg);    
}

.flip-card-front:hover,
.flip-card-back:hover {
  scale: 1.05;
  @apply shadow-2xl;
}

.flip-card-back {
  transform: rotateY(180deg);
}

.flip-card.flipped .flip-card-inner {
  transform: rotateY(180deg);
}
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const cards = document.querySelectorAll('.flip-card');

    cards.forEach((card) => {
      card.addEventListener('click', () => {
        card.classList.toggle('flipped');
      });
    });
  });
</script>