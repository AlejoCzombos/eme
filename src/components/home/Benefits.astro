---
import PrimaryButton from '../UI/PrimaryButton.astro';

interface Props {
  title: string;
}

const { title } = Astro.props as Props;

const images = await Astro.glob('/public/images/home/benefits/*')
---

<script>
import Swiper from 'swiper';
import 'swiper/bundle';
import { Navigation, Pagination, Autoplay } from 'swiper/modules';
import 'swiper/css';
import 'swiper/css/navigation';
import 'swiper/css/pagination';

const swiper = new Swiper('.swiper-beneficts', {
  modules: [Navigation, Pagination, Autoplay],
  loop: true,
  centeredSlides: true,
  centeredSlidesBounds: true,
  centerInsufficientSlides: true,
  slidesPerView: 3,
  spaceBetween: 60,
  speed: 500,
  autoplay: {
    delay: 2000,
    disableOnInteraction: false,
  },
  breakpoints: {
    1024: {
      slidesPerView: 5,
      spaceBetween: 170,
    },
  },
  wrapperClass: 'swiper-wrapper',
  pagination: {
    el: '.swiper-pagination',
    clickable: true,
    type: 'bullets',
    dynamicBullets: true,
  },
  navigation: {
    prevEl: '.swiper-button-prev',
    nextEl: '.swiper-button-next',
  },
});
</script>

<section class="w-full px-10 py-12 lg:px-0 lg:py-14 max-w-7xl m-auto relative overflow-hidden">
  <h2 class="p-2 mb-16">{title.toLocaleUpperCase()}</h2>
  <div class="swiper-beneficts max-w-6xl m-auto relative overflow-hidden">
    <div class="swiper-wrapper" id="my-slider">
      {
        images.map(image => (
          <div class="swiper-slide flex justify-center items-center">
            <img src={image.default.src} alt="" class="w-full h-full max-h-44 object-cover">
          </div>
        ))
      }
    </div>
  </div>
  <div class="swiper-pagination"></div>
  <div class="swiper-button-prev transform rotate-180 hover:scale-125 transition-transform duration-300 ease-in-out">
    <img class="size-6 lg:size-28" src="/icons/swiperBenefits.svg" alt="Icono siguiente imagen">
  </div>
  <div class="swiper-button-next hover:scale-125 transition-transform duration-300 ease-in-out">
    <img class="size-6 lg:size-28" src="/icons/swiperBenefits.svg" alt="Icono anterior imagen">
  </div>
  <div class="flex justify-center mt-28">
    <PrimaryButton text="Ver mÃ¡s beneficios" href="/beneficios"/>
  </div>
</section>

<style is:global>

.swiper-pagination {
  bottom: 30% !important;
}

.swiper-pagination-bullet{
  width: 16px !important;
  height: 16px !important;
}

.swiper-pagination-bullet-active {
  @apply bg-primary-600 !important;
}

  .swiper-button-next::after,
  .swiper-button-prev::after {
    content: '';
  }
  .swiper-button-next,
  .swiper-button-prev{
    top: 45%;
  }
</style>